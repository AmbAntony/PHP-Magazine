// +------------------------------------------------------------------------+
// | @author Oscar Garc√©s (SoyVillareal)
// | @author_url 1: https://soyvillareal.com
// | @author_url 2: https://github.com/soyvillareal
// | @author_email: hi@soyvillareal.com   
// +------------------------------------------------------------------------+
// | PHP Magazine - The best digital magazine for newspapers or bloggers
// | Licensed under the MIT License. Copyright (c) 2022 PHP Magazine.
// +------------------------------------------------------------------------+
!function(e){e.createNewsletter=function(t){var s=function(e,t){e.attr("disabled",t)},n=function(e){s(e.removeClass("spinner-is-loading"),!1)},r=e("body"),l=e(".newsletter_category"),i=l.children(),a=e(".text_all"),o=e(".text_none"),d=e(".btn_newsletter"),c=e(".item_place"),h=!0;e(".close-newsletter").click(function(){e(".newsletter-fixed").addClass("hidden"),e(".personalize_newsletter").removeAttr("style"),r.removeClass("newsletter-personalized-active"),document.cookie="dismiss_newsletter=true;max-age="+((new Date).getTime()+31536e6)+";path=/"}),e(".newsletter_type").change(function(){var t=e(this),s=t.parents(".content_newsletter").find(".personalize_newsletter");"personalized"==t.val()?s.css("height",s.children().first().height(),r.addClass("newsletter-personalized-active")):(s.removeAttr("style"),r.removeClass("newsletter-personalized-active"))}),l.change(function(t){e(this).children().length==e(this).val().length?(a.addClass("hidden"),o.removeClass("hidden")):(a.removeClass("hidden"),o.addClass("hidden"))}),e(".select_all").click(function(){i.prop("selected",h),h=!h,a.toggleClass("hidden"),o.toggleClass("hidden")}),d.click(function(){var r=e(this),l=r.parent(),i=l.find(".newsletter_email"),a=i.siblings(".text-error");s(r.addClass("spinner-is-loading"),!0),e.post(t.url+"?token="+t.token,{email:i.val(),type:l.find(".newsletter_type").val(),frequency:l.find(".newsletter_frequency").val(),popular:l.find(".newsletter_popular").is(":checked"),cats:JSON.stringify(l.find(".newsletter_category").val())},function(t){200==t.S?(s(c,!0),n(r),a.addClass("color-green").removeClass("color-red").text(t.M),setTimeout(function(){i.removeClass("active"),a.text("").addClass("color-red").removeClass("color-green"),l.find(".personalize_newsletter").removeAttr("style"),e(".content_newsletter").trigger("reset"),s(c,!1),s(r,!1)},3e3)):(a.text(t.E),i.addClass("border-red boxshadow-red"),n(r))})}),e(".newsletter_email").on("keyup, input",function(){var t=e(this);""!=t.val()&&(t.removeClass("border-red boxshadow-red").siblings(".text-error").text(""),s(d,!1))})}}(jQuery);