// +------------------------------------------------------------------------+
// | @author Oscar GarcÃ©s (SoyVillareal)
// | @author_url 1: https://soyvillareal.com
// | @author_url 2: https://github.com/soyvillareal
// | @author_email: hi@soyvillareal.com   
// +------------------------------------------------------------------------+
// | PHP Magazine - The best digital magazine for newspapers or bloggers
// | Licensed under the MIT License. Copyright (c) 2022 PHP Magazine.
// +------------------------------------------------------------------------+
(function(){var t,e=function(t){t.addClass("spinner-is-loading").attr("disabled",!0)},a=function(t){t.removeClass("spinner-is-loading").removeAttr("disabled"),n=!0},n=!0;$(window).on("beforeunload",function(){if(null!=t&&n)return paper_gp.word.leave_page_changes_will_saved}),$(".btn_cpalette").click(function(){var t=$(this),e=t.attr("data-type"),a=t.next(),n="dark";if($(".btn_presave").attr("data-type",e),"dark"==e?(n="light",$("html").attr("dark",!0)):$("html").removeAttr("dark"),a.hasClass("hidden")){var r=$(".btn_cpalette[data-type="+n+"]"),o=function(t){t.find("svg").toggleClass("rotate-180")};o(r),r.next().addClass("hidden"),a.removeClass("hidden"),o(t)}}),$("#btn-apalette").click(function(){var t=$(this),e=t.find("svg"),a=t.parent(),n=function(t){e.toggleClass("rotate-180").find("title").text(t)};e.hasClass("rotate-180")?(n(paper_gp.word.hide),a.removeAttr("style")):(n(paper_gp.word.show),a.css({"min-width":0,width:0}))}),$("#btn-psave").click(function(){var t=$(this);e(t),n=!1,$.post(paper_gp.url.change_palette+"?token="+paper_gp.token,{light_palette:$("#light-fpalette").serialize(),dark_palette:$("#dark-fpalette").serialize()},function(e){console.log(e),200==e.S?window.location.reload():a(t)})}),$("#btn-preset").click(function(){var t=$(this);e(t),n=!1,$.post(paper_gp.url.reset_palette+"?token="+paper_gp.token,{type:t.attr("data-type")},function(e){console.log(e),200==e.S?window.location.reload():a(t)})}),$(".item_palette").each(function(){$(this).next().text($("."+$(this).attr("name")).length)}).spectrum({flat:!1,showInput:!0,showInitial:!0,allowEmpty:!1,showAlpha:!0,clickoutFiresChange:!0,cancelText:paper_gp.word.cancel,chooseText:paper_gp.word.choose,preferredFormat:"hex",move:function(e){var a=$(this),n=$("#"+a.attr("data-type")+"-palette"),r=n.text(),o=window.tinycolor(a.val())._format;t=e.toHexString(),"rgb"==o&&(t=e.toRgbString());var i=r.match(new RegExp("(?!s)([^}])*(?![.#s,>])"+a.attr("name")+"[^}]*}","is")),l=a.attr("data-prop"),p=i[0].replace(new RegExp(l+":([\\s|]*)(["+a.val()+"]+)"),l+":"+t);a.val(t),n.html(r.replace(i[0],p))},change:function(){$(this).val(t)}})})(paper_gp);