// +------------------------------------------------------------------------+
// | @author Oscar GarcÃ©s (SoyVillareal)
// | @author_url 1: https://soyvillareal.com
// | @author_url 2: https://github.com/soyvillareal
// | @author_email: hi@soyvillareal.com   
// +------------------------------------------------------------------------+
// | PHP Magazine - The best digital magazine for newspapers or bloggers
// | Licensed under the MIT License. Copyright (c) 2022 PHP Magazine.
// +------------------------------------------------------------------------+
(function(){var e,t,n,d,a,s,i,o,r,l,h,c,g,p,v,C,f,m,u,_,b=function(e,t){e.attr("disabled",t)};s=$(window),i=$("#drawer"),o=$("#content-shfilter"),r=$("#content-shinfo"),l=$("#content-load-shi"),h=$("#content-load-shc"),c=$("#key-hreset"),g=$("#key-hsearch"),p=$("#content-shresults"),v=function(e){e.attr("aria-expanded",!JSON.parse(e.attr("aria-expanded"))).blur()},C=function(e){return $(".btn_hddown[data-type="+e+"]").siblings().find(".btn_hdfilter.selected").attr("data-type")},f=function(e){var t=$("#content-smessage"),n=$(".btn_hdfilter"),d=$("#btn-hsearch"),a=function(e){$("#type-hdate").val(e[0]),$("#type-hcategory").val(e[1]),$("#type-hauthor").val(e[2]),$("#type-hsort").val(e[3])};b(n,!0),$("#content-nav").addClass("hidden"),o.removeClass("hidden"),g.val().length>0?(b(d,!1),c.removeClass("hidden")):(b(d,!0),c.addClass("hidden")),r.addClass("hidden"),p.addClass("hidden"),l.removeClass("hidden"),h.removeClass("hidden"),$.post(paper_g.url.normal_search+"?token="+paper_g.token,{keyword:g.val(),date:C("date"),category:C("category"),author:C("author"),sort:C("sort")},function(e){200==e.S?(a([e.DT,e.CT,e.AT,e.ST]),t.removeClass("hidden"),l.addClass("hidden"),e.KW&&r.removeClass("hidden").html(e.IO),h.addClass("hidden"),p.html(e.HT).removeClass("hidden"),m=e.IDS,_=u=!0,b(n,!1)):(a([e.DT,e.CT,e.AT,e.ST]),u=!1,t.addClass("hidden"),p.removeClass("hidden").html(e.HT),r.addClass("hidden"),l.addClass("hidden"),h.addClass("hidden"),b(n,!1))})},m=[],u=!1,_=!0,function(){var e=$(".btn_hddown"),t=function(){var e=$(".btn_hddown[aria-expanded=true]"),t=e.siblings(),n=e.parent();e.length>0&&t.css({left:(n.width()-t.width())/2+n.position().left})},n=!0,d=i.children();e.click(function(){var t=$(this),a=t.siblings(),r=$(".btn_hddown[aria-expanded=true]"),l=e.index(t),h=t.parent(),c=0;e.parent().each(function(e){e<l&&(c+=$(this).width())}),n=!1,r.length>0&&(r.siblings().addClass("hidden"),v(r)),i.scrollTop(0),d.addClass("overflow-hidden"),v(t),a.removeClass("hidden").css({left:(h.width()-a.width())/2+h.position().left}),o.width()<s.width()&&o.animate({scrollLeft:0==l?0:l==e.length-1?o.children().width():c},750,function(){n=!0})}),o.scroll(function(){var a=$(".btn_hddown[aria-expanded=true]"),i=a.siblings(),r=o.width(),l=o.scrollLeft()+(s.width()-40);(0==e.index(a)&&l>r||2==e.index(a)&&l<o.children().width())&&n&&(i.addClass("hidden"),d.removeClass("overflow-hidden")),t()}),$(".btn_hdfilter").click(function(){var e=$(this),t=e.parents(".item_hdfilter"),n=t.prev(),d=n.attr("data-type");t.find(".btn_hdfilter.selected").removeClass("selected"),e.addClass("selected"),f(),n.text(("date"==d?paper_g.word.date:"category"==d?paper_g.word.category:paper_g.word.sort_by)+" ("+$.trim(e.text())+")")}),s.resize(t),$(document).click(function(e){var t=$(".btn_hddown[aria-expanded=true]");-1==$(".item_hdfilter, .item_hdfilter *, .btn_hddown, .btn_hddown *").index(e.target)&&t.length>0&&(t.siblings().addClass("hidden"),o.removeClass("pointer-events-none"),v(t),d.removeClass("overflow-hidden"))})}(),e=$("body"),t=i.children(),n=$("#content-nav"),d=$(".btn_drawer"),a=function(){u=!1,$("#content-smessage").removeClass("hidden"),o.addClass("hidden"),h.addClass("hidden"),n.removeClass("hidden"),p.addClass("hidden").html(""),l.addClass("hidden"),r.addClass("hidden").html("")},c.click(a),d.click(function(){a(),g.val(""),e.toggleClass("overflow-hidden").toggleClass("backdrop-active-as"),v($(d[0])),paper_g.loggedin?e.removeClass("modal-login-active"):$(".btn_account").removeClass("active").siblings().addClass("hidden")}),g.keyup(f),t.scroll(function(){u&&_&&t.scrollTop()+t.height()>=t.children().height()-100&&(_=!1,h.removeClass("hidden"),$.post(paper_g.url.table_search+"?token="+paper_g.token,{keyword:g.val(),search_ids:JSON.stringify(m),date:C("date"),category:C("category"),author:C("author"),sort:C("sort")},function(e){200==e.S?(p.append(e.HT),m=e.IDS,h.addClass("hidden"),_=!0):h.addClass("hidden")}))}),paper_g.loggedin&&function(){var e=$(window),t=$("#container-notifications"),n=$("#content-nsettings"),d=$("#btn-bnotifications"),a=$("#btn-bnmenu"),s=$("#btn-nsettings"),i=$("#btn-nssave"),o=$("#content-notifications"),r=$("#content-ntspinner"),l=$("#container-menu"),h=$(".item_caccount"),c=$("#content-nbspinner"),g=$("#content-nreload"),p=$("#content-ntno"),v=function(){var n=e.height()-65,d=e.width()-20;t.css({width:d<=_?d:"",height:n<=u?n:""})},C=function(){s.removeClass("hidden"),"hide"==t.attr("data-content")&&p.removeClass("hidden"),i.addClass("hidden"),n.addClass("hidden"),o.removeClass("hidden"),a.removeClass("hidden"),d.addClass("hidden")},f=function(e){e.removeClass("spinner-is-loading").addClass("hidden")},m=function(e){e.addClass("spinner-is-loading").removeClass("hidden")},u=t.height(),_=t.width(),k=!0,w=!0;e.resize(v),a.click(function(){t.addClass("hidden"),l.removeAttr("style")}),d.click(C),s.click(function(){n.removeClass("hidden"),p.addClass("hidden"),o.addClass("hidden"),d.removeClass("hidden"),a.addClass("hidden"),i.removeClass("hidden"),s.addClass("hidden")}),i.click(function(){var e=$(this);b(e.addClass("spinner-is-loading"),!0),$.post(paper_g.url.nsettings+"?token="+paper_g.token,{values:JSON.stringify(n.children().serializeArray())},function(t){t.S,b(e.removeClass("spinner-is-loading"),!1),C()})}),t.children().last().scroll(function(){var e=$(this),t=[];e.scrollTop()+e.height()>=.9*o.height()&&k&&(k=!1,o.children().each(function(){t.push($(this).attr("data-id"))}),m(c),$.post(paper_g.url.get_ncontent+"?token="+paper_g.token,{notify_ids:JSON.stringify(t)},function(e){200==e.S?(f(c),o.append(e.HT),k=!0):f(c)}))}),function(){var e=$("#container-languages"),n=$("#btn-notifications"),d=$("#btn-messages"),a=function(e=0,t){t>0?e.removeClass("color-grey").addClass("font-bold color-red"):e.addClass("color-grey").removeClass("font-bold color-red")},i=function(){m(r),t.removeClass("hidden"),b(s,!0),$.post(paper_g.url.get_ncontent+"?token="+paper_g.token,function(e){200==e.S?(h.text(0==C&&0==u?"":u>0?u:""),f(r),b(s,!1),v(),a(n),p.addClass("hidden"),t.removeAttr("data-content"),l.css("opacity",0),o.html(e.HT),g.removeAttr("style"),k=w=!0):(f(r),v(),t.attr("data-content","hide"),p.removeClass("hidden"),b(s,!1))})},c=function(e){200==e.S?(C=e.CN,u=e.CM,h.text(e.CT),w&&e.CN>0&&g.css("top",50),a(n,e.CN),a(d,e.CM)):(h.text(""),a(n),a(d))},C=0,u=0;n.click(i),$("#btn-nreload").click(i),$("#btn-cnreload").click(function(){g.removeAttr("style"),w=!1}),$("#btn-languages, #btn-blmenu").click(function(){e.toggleClass("hidden"),l.toggleClass("hidden")}),"off"==paper_g.settings.nodejs?setInterval(function(){$.post(paper_g.url.get_count+"?token="+paper_g.token,c)},5e3):SOCKET.on("setOutnotifies",c)}()}(),"on"==paper_g.settings.switch_mode&&function(){var e=$(".btn_darkmode");e.click(function(){var t=$(this),n=$("html"),d=t.attr("data-type"),a="night",s='<title>{$word->activate_night_mode}</title><path fill="#ccc" d="M13.276 24c3.701 0 7.082 -1.684 9.321 -4.443 0.331 -0.408 -0.03 -1.005 -0.542 -0.907 -5.822 1.109 -11.169 -3.355 -11.169 -9.232 0 -3.385 1.812 -6.499 4.758 -8.175 0.454 -0.258 0.34 -0.947 -0.176 -1.042A12.101 12.101 0 0 0 13.276 0c-6.624 0 -12 5.368 -12 12 0 6.624 5.368 12 12 12z"/>',i=0;"night"==d&&(a="light",s='<title>{$word->disable_night_mode}</title><path fill="#fff" d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/>',i=1),paper_g.loggedin?(b(t.addClass("spinner-is-loading"),!0),$.post(paper_g.url.set_darkmode+"?token="+paper_g.token,{darkmode:i},function(i){200==i.S?(b(t.removeClass("spinner-is-loading"),!1),"night"==d?n.attr("dark",!0):n.removeAttr("dark"),e.attr("data-type",a),e.find("svg").html(s),$("#item-tdarkmode").text(i.TX)):b(t.removeClass("spinner-is-loading"),!1)})):("night"==d?n.attr("dark",!0):n.removeAttr("dark"),e.attr("data-type",a),e.find("svg").html(s),document.cookie="darkmode="+i+";max-age="+((new Date).getTime()+31536e6)+";path=/")})}()})(paper_g);