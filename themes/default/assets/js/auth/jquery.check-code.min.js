// +------------------------------------------------------------------------+
// | @author Oscar Garc√©s (SoyVillareal)
// | @author_url 1: https://soyvillareal.com
// | @author_url 2: https://github.com/soyvillareal
// | @author_email: hi@soyvillareal.com   
// +------------------------------------------------------------------------+
// | PHP Magazine - The best digital magazine for newspapers or bloggers
// | Licensed under the MIT License. Copyright (c) 2022 PHP Magazine.
// +------------------------------------------------------------------------+
(function(){var e=$(".input_key"),a=$(".number"),t=$("#one"),o=$("#two"),r=$("#three"),l=$("#four"),n=$("#five"),c=$("#six"),s=$("#btn-check"),i=$("#btn-rcode"),p=t.parent().siblings(".text-error"),v=function(){var a=""!=t.val()&&""!=o.val()&&""!=r.val()&&""!=l.val()&&""!=n.val()&&""!=c.val(),i="change-email"!=paper_ac.page,v=t.val()+o.val()+r.val()+l.val()+n.val()+c.val(),_=paper_ac.url.sverify_code,f={code:v};if(e.each(function(){var e=$(this);""==e.val()?(u(e),p.text("*"+paper_ac.word.this_field_is_empty)):(e.removeClass("border-red"),e.removeClass("boxshadow-red"),a&&p.text(""))}),!a)return!1;d(s.addClass("spinner-is-loading"),!0),i&&(_=paper_ac.url.tverify_code,f={code:v,return_url:paper_ac.return_url,type:paper_ac.type}),$.post(_+"?token="+paper_ac.token,f,function(a){200==a.S?window.location=i?a.UR:paper_ac.url.r_settings:(s.removeClass("spinner-is-loading"),d(s,!1),u(e),p.text(a.E))})},d=function(e,a){e.attr("disabled",a)},u=function(e){e.addClass("border-red boxshadow-red")},_=paper_ac.tokenu,f=0;paper_ac.descode?v():t.focus(),s.click(v),i.click(function(){var e=paper_ac.url.sresend_code;d(i.text(paper_ac.word.please_wait),!0),clearTimeout(f),"change-email"!=paper_ac.page&&(e=paper_ac.url.tresend_code),$.post(e+"?token="+paper_ac.token,{tokenu:_,type:paper_ac.type},function(e){200==e.S?(_=e.TK,window.history.pushState({state:"new"},"",paper_ac.url_check+"/"+_+paper_ac.return_param),i.addClass("color-green").removeClass("color-black").text(e.M),f=setTimeout(function(){d(i.addClass("color-black").removeClass("color-green").text(paper_ac.word.resend_code),!1)},5e3)):(i.addClass("color-red").removeClass("color-black").text(e.E),f=setTimeout(function(){d(i.addClass("color-black").removeClass("color-red").text(paper_ac.word.resend_code),!1)},5e3))})}),a.on("input",function(){""==$(this).val()?d(s,!0):$(this).val($(this).val().replace(/[^0-9]/gi,""))}).on("paste",function(t){var o=t.originalEvent.clipboardData.getData("text");o&&!o.match(/[^0-9]/)&&(1==o.length?$(this).val(o):(a.each(function(e){$(this).val(o.slice(e,e+1))}),setTimeout(function(){(o.length<a.length?$(e[o.length]):e.last()).focus(),v()})))}),e.on("input",function(a){""!=t.val()&&""!=o.val()&&""!=r.val()&&""!=l.val()&&""!=n.val()&&""!=c.val()&&d(s,!1),""==t.val()&&""==o.val()&&""==r.val()&&""==l.val()&&""==n.val()&&""==c.val()&&(e.removeClass("border-red boxshadow-red"),p.text("")),$(this).val().length>1&&$(this).val($(this).val().slice(0,1))}).keyup(function(a){var i=$(this),p=e.index(i),v=$(e[p-1]),u=a.which||a.keyCode,_={48:0,49:1,50:2,51:3,52:4,53:5,54:6,55:7,56:8,57:9},f={96:0,97:1,98:2,99:3,100:4,101:5,102:6,103:7,104:8,105:9},h=function(){setTimeout(function(){$(e[p+1]).focus()})};-1!=[13,8,37,38,39,40].indexOf(u)||!(u>47&&u<58||u>95&&u<106)||(a.ctrlKey||a.metaKey)&&86==u?8==u?((""==t.val()||""==o.val()||""==r.val()||""==l.val()||""==n.val()||""==c.val())&&d(s,!0),setTimeout(function(){$(e[p]).val(""),v.focus()})):37==u||40==u?setTimeout(function(){v.focus()}):(39==u||38==u)&&h():(i.val().length>0&&(u>47&&u<58?i.val(_[u]):i.val(f[u])),h())})})(paper_ac);