// +------------------------------------------------------------------------+
// | @author Oscar GarcÃ©s (SoyVillareal)
// | @author_url 1: https://soyvillareal.com
// | @author_url 2: https://github.com/soyvillareal
// | @author_email: hi@soyvillareal.com   
// +------------------------------------------------------------------------+
// | PHP Magazine - The best digital magazine for newspapers or bloggers
// | Licensed under the MIT License. Copyright (c) 2022 PHP Magazine.
// +------------------------------------------------------------------------+
(function(){var e=$("#btn-login"),a=$("#username").focus(),r=$("#password"),t=$(".disable_before"),n=r.siblings(".text-error"),o=function(e,a){e.attr("disabled",a)},l=function(e){return e.addClass("border-red boxshadow-red")},s=function(e){e.removeClass("border-red boxshadow-red")},i=function(e){o(e.removeClass("spinner-is-loading"),!1)},c=0,p=function(e,a=""){e.text(a).removeClass("color-green").addClass("color-red")},d=function(d,u,_=""){$.post(paper_al.url.login+"?token="+paper_al.token,{username:d,password:u,recaptcha:_,save_session:$("#staylogged-checkbox:checked").val(),return_url:paper_al.return_url,return_param:paper_al.return_param},function(d){console.log(d),200==d.S?window.location=d.UR:401==d.S?(n.html(d.E),l(a),l(r),o(t,!1),i(e),"pending"==d.EE&&$("#btn-rcode").click(function(){var e=$(this);o(e.text(paper_al.word.please_wait),!0),$.post(paper_al.url.resend_code+"?token="+paper_al.token,{tokenu:d.TK,type:"verify_email"},function(t){200==t.S?(n.text(t.M).removeClass("color-red").addClass("color-green"),s(a),s(r),c=setTimeout(function(){o(e,!1),p(n)},3e3)):(o(e,!1),p(n,t.E))})})):(p(n,d.E),l(a),l(r),o(t,!1),i(e))})};e.click(function(i){var p=a.val(),u=r.val(),_=0==p.length,f=0==u.length;_||f?(i.preventDefault(),l(_?a:r).siblings(".text-error").text("*"+paper_al.word.this_field_is_empty)):f||(o(t,!0),e.addClass("spinner-is-loading"),n.html(""),s(a),s(r),clearTimeout(c),"on"==paper_al.recaptcha?grecaptcha.ready(function(){grecaptcha.execute(paper_al.reCAPTCHA_site_key,{action:"login"}).then(function(e){d(p,u,e)})}):d(p,u))}),$(".item_input").on("keyup, input",function(){var t=$(this);""!=a.val()&&""!=r.val()?o(e,!1):o(e,!0),s(a),s(r),n.text(""),t.val().length>0?t.addClass("active"):t.removeClass("active")})})(paper_al);