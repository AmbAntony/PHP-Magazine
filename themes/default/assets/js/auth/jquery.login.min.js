(function(){
	var x = $('#btn-login'),
        h = $('#username').focus(),
        v = $('#password'),
        f = v.siblings('.text-error'),
        y = function(e, i){
            e.attr('disabled', i)
        },
        w = function(e){
            return e.addClass('border-red boxshadow-red');
        },
        p = function(e){
            e.removeClass('border-red boxshadow-red');
        },
        c = function(e){
            y(e.removeClass('spinner-is-loading'), !1);
        };

    x.click(function(e){
        var o = h.val(),
            s = v.val(),
            t = o.length == 0,
            u = s.length == 0;
        if(t || u){
        	e.preventDefault(), w((t ? h : v)).siblings('.text-error').text('*'+paper_al.word.this_field_is_empty);
        } else if(!u){
        		y(x.addClass('spinner-is-loading'), !0), f.html(''), p(h), p(v), $.post(paper_al.url.login+"?token="+paper_al.token, {'username': o, 'password': s, 'save-session': $('#accept-checkbox:checked').val(), 'return_url': paper_al.return_url, 'return_param': paper_al.return_param}, function(e){
		            if(e.S == 200){
		            	window.location.href = e.UR
		            } else {
		            	if(e.S == 401){
		            		f.html(e.E), w(h), w(v), c(x), e.EE == 'pending' && $('#btn-rcode').click(function(){
				                var r = $(this);
				                y(r.text(paper_al.word.please_wait), !0), $.post(paper_al.url.resend_code+"?token="+paper_al.token, {'tokenu': e.TK, 'type': 'verify_email'}, function(e){
					                if(e.S == 200){
					                	f.text(e.M).removeClass('color-red').addClass('color-green'), p(h), p(v), setTimeout(function(){
						                    y(r, !1), f.text('').removeClass('color-green').addClass('color-red')
						                }, 3000)
					                } else {
					                	y(r, !1), f.text(e.E)
					                }
					            })
					        })
		            	} else {
		            		f.text(e.E), w(h), w(v), c(x)
		            	}
		            }
		        })
        }
    }), $('.item_input').on('keyup, input', function(){
        var o = $(this);
        h.val() != '' && v.val() != '' ? y(x, !1) : y(x, !0), p(h), p(v), f.text(''), o.val().length > 0 ? o.addClass('active') : o.removeClass('active');
    });
})(paper_al);