// +------------------------------------------------------------------------+
// | @author Oscar GarcÃ©s (SoyVillareal)
// | @author_url 1: https://soyvillareal.com
// | @author_url 2: https://github.com/soyvillareal
// | @author_email: hi@soyvillareal.com   
// +------------------------------------------------------------------------+
// | PHP Magazine - The best digital magazine for newspapers or bloggers
// | Licensed under the MIT License. Copyright (c) 2022 PHP Magazine.
// +------------------------------------------------------------------------+
(function(){var e=$("#btn-rpassword"),a=$("#email").focus(),t=a.siblings(".text-error"),o=function(e,a){e.attr("disabled",a)},r=function(e){e.addClass("border-red boxshadow-red")},n=function(e){e.removeClass("border-red boxshadow-red")},s=function(e){o(e.removeClass("spinner-is-loading"),!1)},i=0,l=function(e,a=""){e.text(a).removeClass("color-green").addClass("color-red")},c=function(i,c=""){$.post(paper_af.url.forgot_password+"?token="+paper_af.token,{email:i,recaptcha:c},function(i){console.log(i),200==i.S?(s(e),t.text(i.M).removeClass("color-red").addClass("color-green"),n(a),c=setTimeout(function(){o(e,!1),l(t)},3e3)):401==i.S?(t.html(i.E),r(a),s(e),"pending"==i.EE&&$("#btn-rcode").click(function(){var e=$(this);o(e.text(paper_af.word.please_wait),!0),$.post(paper_af.url.resend_code+"?token="+paper_af.token,{tokenu:i.TK,type:"verify_email"},function(r){200==r.S?(t.text(r.M).removeClass("color-red").addClass("color-green"),n(a),c=setTimeout(function(){o(e,!1),l(t)},3e3)):(o(e,!1),t.text(r.E))})})):(l(t,i.E),r(a),s(e))})};e.click(function(s){var l=a.val();0==l.length?(s.preventDefault(),t.text("*"+paper_af.word.this_field_is_empty),r(a)):l.match(/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/)?(o(e.addClass("spinner-is-loading"),!0),t.html(""),n(a),clearTimeout(i),"on"==paper_af.recaptcha?grecaptcha.ready(function(){grecaptcha.execute(paper_af.reCAPTCHA_site_key,{action:"forgot_password"}).then(function(e){c(l,e)})}):c(l)):(s.preventDefault(),t.text("*"+paper_af.word.enter_a_valid_email),r(a))}),$(".item_input").on("keyup, input",function(){var r=$(this);""!=a.val()?o(e,!1):o(e,!0),n(a),t.text(""),r.val().length>0?r.addClass("active"):r.removeClass("active")})})(paper_af);