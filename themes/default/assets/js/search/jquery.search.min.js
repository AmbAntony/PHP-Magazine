// +------------------------------------------------------------------------+
// | @author Oscar GarcÃ©s (SoyVillareal)
// | @author_url 1: https://soyvillareal.com
// | @author_url 2: https://github.com/soyvillareal
// | @author_email: hi@soyvillareal.com   
// +------------------------------------------------------------------------+
// | PHP Magazine - The best digital magazine for newspapers or bloggers
// | Licensed under the MIT License. Copyright (c) 2022 PHP Magazine.
// +------------------------------------------------------------------------+
(function(){var e,t,d,n=$(window),a=$("body"),s=$("#content-sfilter"),i=$("#content-sinfo"),r=$("#content-load-si"),o=$("#content-load-sc"),l=$("#key-reset"),h=$("#key-search"),c=$("#content-sresults"),p=function(e,t){e.attr("disabled",t)},u=function(e){e.attr("aria-expanded",!JSON.parse(e.attr("aria-expanded"))).blur()},f=function(e){return $(".btn_ddown[data-type="+e+"]").siblings().find(".btn_dfilter.selected").attr("data-type")},w=function(e){var t=$(".btn_dfilter"),d=$("#btn-search"),a=function(e){n[0].history.pushState({state:"new"},"",e[0]),$("#type-date").val(e[1]),$("#type-category").val(e[2]),$("#type-author").val(e[3]),$("#type-sort").val(e[4])};p(t,!0),h.val().length>0?(p(d,!1),l.removeClass("hidden")):(p(d,!0),l.addClass("hidden")),i.addClass("hidden"),c.addClass("hidden"),r.removeClass("hidden"),o.removeClass("hidden"),$.post(paper_s.url.normal_search+"?token="+paper_s.token,{keyword:h.val(),date:f("date"),category:f("category"),author:f("author"),sort:f("sort")},function(e){200==e.S?(a([e.URL,e.DT,e.CT,e.AT,e.ST]),r.addClass("hidden"),e.KW&&i.removeClass("hidden").html(e.IO),o.addClass("hidden"),c.html(e.HT).removeClass("hidden"),v=e.IDS,C=!0,p(t,!1)):(a([e.URL,e.DT,e.CT,e.AT,e.ST]),c.removeClass("hidden").html(e.HT),i.addClass("hidden"),r.addClass("hidden"),o.addClass("hidden"),p(t,!1))})},v=paper_s.search_ids,C=!0;e=$(".btn_ddown"),t=function(){var e=$(".btn_ddown[aria-expanded=true]"),t=e.siblings(),d=e.parent();e.length>0&&t.css({left:(d.width()-t.width()+(n.width()-a.width()))/2+d.position().left})},d=!0,e.click(function(){var t=$(this),i=t.siblings(),r=$(".btn_ddown[aria-expanded=true]"),o=e.index(t),l=t.parent(),h=0;e.parent().each(function(e){e<o&&(h+=$(this).width())}),d=!1,r.length>0&&(r.siblings().addClass("hidden"),u(r)),$(document).scrollTop(0),a.addClass("overflow-hidden"),u(t),i.removeClass("hidden"),i.css({left:(l.width()-i.width()+(n.width()-a.width()))/2+l.position().left}),s.width()<n.width()&&s.animate({scrollLeft:0==o?0:o==e.length-1?s.children().width():h},750,function(){d=!0})}),s.scroll(function(){var i=$(".btn_ddown[aria-expanded=true]"),r=i.siblings(),o=s.width(),l=s.scrollLeft()+(n.width()-40);(0==e.index(i)&&l>o||2==e.index(i)&&l<s.children().width())&&d&&(r.addClass("hidden"),a.removeClass("overflow-hidden")),t()}),$(".btn_dfilter").click(function(){var e=$(this),t=e.parents(".item_dfilter"),d=t.prev(),n=d.attr("data-type");t.find(".btn_dfilter.selected").removeClass("selected"),e.addClass("selected"),w(),d.text(("date"==n?paper_s.word.date:"category"==n?paper_s.word.category:"author"==n?paper_s.word.author:paper_s.word.sort_by)+" ("+$.trim(e.text())+")")}),n.resize(t),$(document).click(function(e){var t=$(".btn_ddown[aria-expanded=true]");-1==$(".item_dfilter, .item_dfilter *, .btn_ddown, .btn_ddown *").index(e.target)&&t.length>0&&(t.siblings().addClass("hidden"),s.removeClass("pointer-events-none"),u(t),a.removeClass("overflow-hidden"))}),function(){var e=$("#container-sposts");l.click(function(){h.val(""),i.addClass("hidden"),w()}),h.keyup(w),v.length>0&&$(document).scroll(function(){C&&$(document).scrollTop()+n.height()>=e.height()&&(C=!1,o.removeClass("hidden"),$.post(paper_s.url.table_search+"?token="+paper_s.token,{keyword:h.val(),search_ids:JSON.stringify(v),date:f("date"),category:f("category"),author:f("author"),sort:f("sort")},function(e){200==e.S?(c.append(e.HT),v=e.IDS,o.addClass("hidden"),C=!0):o.addClass("hidden")}))})}()})(paper_s);